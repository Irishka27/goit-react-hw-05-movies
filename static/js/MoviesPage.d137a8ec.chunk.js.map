{"version":3,"file":"static/js/MoviesPage.d137a8ec.chunk.js","mappings":"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","sources":["webpack://goit-react-hw-05-movies/./src/components/Button/Button.module.css?ce6f","components/Button/Button.jsx","webpack://goit-react-hw-05-movies/./src/components/Error/Error.module.css?141d","components/Error/Error.jsx","services/apiService.js","services/status.js","webpack://goit-react-hw-05-movies/./src/components/SearchBar/SearchBar.module.css?35a0","components/SearchBar/SearchBar.jsx","webpack://goit-react-hw-05-movies/./src/views/MoviesPage/MoviesPage.module.css?0f72","views/MoviesPage/MoviesPage.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"button\":\"Button_button__wiIYs\"};","import PropTypes from 'prop-types';\nimport style from './Button.module.css';\n\nexport default function Button({ onLoadMore }) {\n  return (\n    <button className={style.button} type=\"button\" onClick={() => onLoadMore()}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onLoadMore: PropTypes.func.isRequired,\n};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Error_wrapper__AOSzo\",\"text\":\"Error_text__FJVYL\"};","import PropTypes from 'prop-types';\nimport errorImage from '../../img/no_results_found.png';\nimport style from'./Error.module.css';\n\nexport default function ErrorComponent({ message }) {\n  return (\n    <div role=\"alert\" className={style.wrapper}>\n      <img src={errorImage} width=\"400\" alt=\"no results found\" />\n      <p text={message} className={style.text}>\n        {message}\n      </p>\n    </div>\n  );\n}\n\nErrorComponent.propTypes = {\n  message: PropTypes.string,\n};\n","import axios from 'axios';\n\nconst BASE_URL = 'https://api.themoviedb.org/3/';\nconst API_KEY = '92ffb34e08e714eb390805a25b0a06d3';\n\naxios.defaults.baseURL = BASE_URL;\naxios.defaults.params = {\n  api_key: API_KEY,\n  language: 'en-US',\n};\n\nasync function getPopularMovies(page) {\n  try {\n    const config = {\n      url: `trending/movie/day`,\n      params: {\n        page,\n      },\n    };\n    const { data } = await axios(config, page);\n    return data;\n  } catch (error) {\n    console.log('error', { error });\n    return null;\n  }\n}\n\nasync function getMoviesByKeyWord(query, page) {\n  try {\n    const config = {\n      url: `search/movie`,\n      params: {\n        query,\n        page,\n      },\n    };\n    const { data } = await axios(config, query, page);\n    return data;\n  } catch (error) {\n    console.log('error', { error });\n    return null;\n  }\n}\n\nasync function getMovieById(id) {\n  try {\n    const config = {\n      url: `movie/${id}`,\n    };\n    const { data } = await axios(config, id);\n    return data;\n  } catch (error) {\n    console.log('error', { error });\n    return null;\n  }\n}\n\nasync function getCastInfo(id) {\n  try {\n    const config = {\n      url: `movie/${id}/credits`,\n    };\n    const { data } = await axios(config, id);\n    return data.cast;\n  } catch (error) {\n    console.log('error', { error });\n    return null;\n  }\n}\n\nasync function getMovieReview(id) {\n  try {\n    const config = {\n      url: `movie/${id}/reviews`,\n    };\n    const { data } = await axios(config, id);\n    return data.results;\n  } catch (error) {\n    console.log('error', { error });\n    return null;\n  }\n}\n\nconst apiService = {\n  getPopularMovies,\n  getMoviesByKeyWord,\n  getMovieById,\n  getCastInfo,\n  getMovieReview,\n};\n\nexport default apiService;\n","const Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nexport default Status;\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"SearchBar_form__gW7Gj\",\"input\":\"SearchBar_input__bIy50\",\"button\":\"SearchBar_button__T7RTc\"};","import { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport styles from './SearchBar.module.css';\n\nexport default function SearchBar({ onHandleSubmit }) {\n  const [query, setQuery] = useState('');\n\n  const handleChangeQuery = event => {\n    setQuery(event.currentTarget.value.toLowerCase());\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    if (query.trim() === '') {\n      toast.info('Please enter your query!');\n      return;\n    }\n\n    onHandleSubmit(query);\n    setQuery('');\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className={styles.form}>\n      <input\n        type=\"text\"\n        value={query}\n        autoComplete=\"off\"\n        autoFocus\n        placeholder=\"Enter movie name...\"\n        onChange={handleChangeQuery}\n        className={styles.input}\n      />\n      <button type=\"submit\" className={styles.button}>\n        Search\n      </button>\n    </form>\n  );\n}\n\nSearchBar.propTypes = {\n  onHandleSubmit: PropTypes.func.isRequired,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"moviesList\":\"MoviesPage_moviesList__Z-6jD\",\"moviesItem\":\"MoviesPage_moviesItem__3W6cK\",\"movieTitle\":\"MoviesPage_movieTitle__hHuja\",\"poster\":\"MoviesPage_poster__wUT8q\",\"link\":\"MoviesPage_link__GMVyM\"};","import { useState, useEffect } from 'react';\nimport {\n  NavLink,\n  useRouteMatch,\n  useHistory,\n  useLocation,\n} from 'react-router-dom';\n\nimport apiService from '../../services/apiService';\nimport Status from '../../services/status';\nimport Loader from 'components/Loader';\nimport Button from 'components/Button';\nimport ErrorComponent from 'components/Error';\nimport noPhoto from '../../img/no_image.jpg';\nimport SearchBar from 'components/SearchBar';\nimport styles from './MoviesPage.module.css';\n\nexport default function MoviesPage() {\n  const history = useHistory();\n  const location = useLocation();\n  const { url } = useRouteMatch();\n  const [query, setQuery] = useState('');\n  const [ , setTotalPage] = useState(0);\n  const [page, setPage] = useState(1);\n  const [movies, setMovies] = useState(null);\n  const [error, setError] = useState(null);\n  const [status, setStatus] = useState(Status.IDLE);\n  \n   useEffect(() => {\n    if (location.search === '') {\n      return;\n    }\n\n    const newSearch = new URLSearchParams(location.search).get('query');\n    setQuery(newSearch, page);\n  }, [location.search, page]);\n\n  useEffect(() => {\n    if (!query) return;\n    setStatus(Status.PENDING);\n    apiService\n      .getMoviesByKeyWord(query, page)\n      .then(({ results, total_pages }) => {\n        if (results.length === 0) {\n          setError(`No results to show for \"${query}!\"`);\n          setStatus(Status.REJECTED);\n          return;\n        }\n\n        setMovies(results);\n        setTotalPage(total_pages);\n        setStatus(Status.RESOLVED);\n      })\n      .catch(error => {\n        console.log(error);\n        setError(error.message);\n        setStatus(Status.REJECTED);\n      });\n  }, [query, page]);\n\n  const searchImages = newSearch => {\n    if (query === newSearch) return;\n    setQuery(newSearch);\n    setMovies(null);\n    setError(null);\n    setStatus(Status.IDLE);\n    setPage(page);\n    history.push({ ...location, search: `query=${newSearch}` });\n  };\n\n  const onHandlePage = () => {\n    setPage(page => page +1)\n  }\n\n  return (\n    <>\n      <SearchBar onHandleSubmit={searchImages} />\n\n      {status === Status.PENDING && <Loader />}\n\n      {status === Status.REJECTED && <ErrorComponent message={error} />}\n\n      {status === Status.RESOLVED && (\n        <>\n          <ul className={styles.moviesList}>\n            {movies.map(movie => (\n              <li key={movie.id} className={styles.moviesItem}>\n                  <NavLink\n                  to={{\n                    pathname: `${url}/${movie.id}`,\n                    state: { from: { location } },\n                  }}\n                  className={styles.link}\n                >\n                <img\n                  src={\n                    movie.poster_path\n                      ? `https://image.tmdb.org/t/p/w500/${movie.poster_path}`\n                      : noPhoto\n                  }\n                  alt={movie.title}\n                  width=\"320\"\n                  className={styles.poster}\n                />\n              \n                  <p className={styles.movieTitle}>{movie.title}</p>\n                </NavLink>\n              </li>\n            ))}\n          </ul>\n          <Button onLoadMore={onHandlePage} />\n        </>\n      )}\n    </>\n  );\n}\n"],"names":["Button","onLoadMore","className","style","type","onClick","ErrorComponent","message","role","src","errorImage","width","alt","text","getPopularMovies","page","config","url","params","axios","data","console","log","error","getMoviesByKeyWord","query","getMovieById","id","getCastInfo","cast","getMovieReview","results","api_key","language","apiService","IDLE","PENDING","RESOLVED","REJECTED","SearchBar","onHandleSubmit","useState","setQuery","onSubmit","event","preventDefault","trim","toast","styles","value","autoComplete","autoFocus","placeholder","onChange","currentTarget","toLowerCase","MoviesPage","history","useHistory","location","useLocation","useRouteMatch","setTotalPage","setPage","movies","setMovies","setError","Status","status","setStatus","useEffect","search","newSearch","URLSearchParams","get","then","total_pages","length","catch","push","Loader","Error","map","movie","to","pathname","state","from","poster_path","noPhoto","title"],"sourceRoot":""}